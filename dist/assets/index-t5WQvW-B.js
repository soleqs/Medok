var ns=Object.defineProperty;var as=(r,e,t)=>e in r?ns(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var yt=(r,e,t)=>as(r,typeof e!="symbol"?e+"":e,t);import{r as m,a as os,R as is,b as ls,d as ar}from"./react-vendor-CIvTOl-U.js";import{c as cs}from"./supabase-vendor-DcDnUUjS.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var or={exports:{}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us=m,ds=Symbol.for("react.element"),hs=Symbol.for("react.fragment"),fs=Object.prototype.hasOwnProperty,gs=us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ms={key:!0,ref:!0,__self:!0,__source:!0};function ir(r,e,t){var s,n={},a=null,o=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)fs.call(e,s)&&!ms.hasOwnProperty(s)&&(n[s]=e[s]);if(r&&r.defaultProps)for(s in e=r.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:ds,type:r,key:a,ref:o,props:n,_owner:gs.current}}Ve.Fragment=hs;Ve.jsx=ir;Ve.jsxs=ir;or.exports=Ve;var i=or.exports,lr,bt=os;lr=bt.createRoot,bt.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Se(){return Se=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Se.apply(this,arguments)}var re;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(re||(re={}));const wt="popstate";function ps(r){r===void 0&&(r={});function e(s,n){let{pathname:a,search:o,hash:l}=s.location;return nt("",{pathname:a,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:ur(n)}return ys(e,t,null,r)}function A(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function cr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xs(){return Math.random().toString(36).substr(2,8)}function vt(r,e){return{usr:r.state,key:r.key,idx:e}}function nt(r,e,t,s){return t===void 0&&(t=null),Se({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?me(e):e,{state:t,key:e&&e.key||s||xs()})}function ur(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function me(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function ys(r,e,t,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,o=n.history,l=re.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Se({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=re.Pop;let x=d(),b=x==null?null:x-u;u=x,c&&c({action:l,location:y.location,delta:b})}function h(x,b){l=re.Push;let v=nt(y.location,x,b);u=d()+1;let R=vt(v,u),w=y.createHref(v);try{o.pushState(R,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(w)}a&&c&&c({action:l,location:y.location,delta:1})}function g(x,b){l=re.Replace;let v=nt(y.location,x,b);u=d();let R=vt(v,u),w=y.createHref(v);o.replaceState(R,"",w),a&&c&&c({action:l,location:y.location,delta:0})}function p(x){let b=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof x=="string"?x:ur(x);return v=v.replace(/ $/,"%20"),A(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let y={get action(){return l},get location(){return r(n,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(wt,f),c=x,()=>{n.removeEventListener(wt,f),c=null}},createHref(x){return e(n,x)},createURL:p,encodeLocation(x){let b=p(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:g,go(x){return o.go(x)}};return y}var St;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(St||(St={}));function bs(r,e,t){return t===void 0&&(t="/"),ws(r,e,t,!1)}function ws(r,e,t,s){let n=typeof e=="string"?me(e):e,a=fr(n.pathname||"/",t);if(a==null)return null;let o=dr(r);vs(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Ms(a);l=Ls(o[c],u,s)}return l}function dr(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let n=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(A(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=le([s,c.relativePath]),d=t.concat(c);a.children&&a.children.length>0&&(A(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dr(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Ps(u,a.index),routesMeta:d})};return r.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))n(a,o);else for(let c of hr(a.path))n(a,o,c)}),e}function hr(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let o=hr(s.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),n&&l.push(...o),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function vs(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Os(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Ss=/^:[\w-]+$/,Ns=3,js=2,ks=1,Cs=10,Es=-2,Nt=r=>r==="*";function Ps(r,e){let t=r.split("/"),s=t.length;return t.some(Nt)&&(s+=Es),e&&(s+=js),t.filter(n=>!Nt(n)).reduce((n,a)=>n+(Ss.test(a)?Ns:a===""?ks:Cs),s)}function Os(r,e){return r.length===e.length&&r.slice(0,-1).every((s,n)=>s===e[n])?r[r.length-1]-e[e.length-1]:0}function Ls(r,e,t){let{routesMeta:s}=r,n={},a="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=jt({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&t&&!s[s.length-1].route.index&&(f=jt({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:le([a,f.pathname]),pathnameBase:Fs(le([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=le([a,f.pathnameBase]))}return o}function jt(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=Rs(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let a=n[0],o=a.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=l[f]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[f];return g&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:r}}function Rs(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),cr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function Ms(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cr(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function fr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function Is(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:n=""}=typeof r=="string"?me(r):r;return{pathname:t?t.startsWith("/")?t:Ds(t,e):e,search:$s(s),hash:Us(n)}}function Ds(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Ge(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ts(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gr(r,e){let t=Ts(r);return e?t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function mr(r,e,t,s){s===void 0&&(s=!1);let n;typeof r=="string"?n=me(r):(n=Se({},r),A(!n.pathname||!n.pathname.includes("?"),Ge("?","pathname","search",n)),A(!n.pathname||!n.pathname.includes("#"),Ge("#","pathname","hash",n)),A(!n.search||!n.search.includes("#"),Ge("#","search","hash",n)));let a=r===""||n.pathname==="",o=a?"/":n.pathname,l;if(o==null)l=t;else{let f=e.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;n.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=Is(n,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const le=r=>r.join("/").replace(/\/\/+/g,"/"),Fs=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$s=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Us=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function _s(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const pr=["post","put","patch","delete"];new Set(pr);const As=["get",...pr];new Set(As);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ne(){return Ne=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ne.apply(this,arguments)}const dt=m.createContext(null),qs=m.createContext(null),Ee=m.createContext(null),Be=m.createContext(null),se=m.createContext({outlet:null,matches:[],isDataRoute:!1}),xr=m.createContext(null);function Pe(){return m.useContext(Be)!=null}function ht(){return Pe()||A(!1),m.useContext(Be).location}function yr(r){m.useContext(Ee).static||m.useLayoutEffect(r)}function Oe(){let{isDataRoute:r}=m.useContext(se);return r?en():Ws()}function Ws(){Pe()||A(!1);let r=m.useContext(dt),{basename:e,future:t,navigator:s}=m.useContext(Ee),{matches:n}=m.useContext(se),{pathname:a}=ht(),o=JSON.stringify(gr(n,t.v7_relativeSplatPath)),l=m.useRef(!1);return yr(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let f=mr(u,JSON.parse(o),a,d.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:le([e,f.pathname])),(d.replace?s.replace:s.push)(f,d.state,d)},[e,s,o,a,r])}function br(){let{matches:r}=m.useContext(se),e=r[r.length-1];return e?e.params:{}}function Vs(r,e){return Bs(r,e)}function Bs(r,e,t,s){Pe()||A(!1);let{navigator:n,static:a}=m.useContext(Ee),{matches:o}=m.useContext(se),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=ht(),f;if(e){var h;let b=typeof e=="string"?me(e):e;u==="/"||(h=b.pathname)!=null&&h.startsWith(u)||A(!1),f=b}else f=d;let g=f.pathname||"/",p=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=!a&&t&&t.matches&&t.matches.length>0?t.matches:bs(r,{pathname:p}),x=Ks(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:le([u,n.encodeLocation?n.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:le([u,n.encodeLocation?n.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,t,s);return e&&x?m.createElement(Be.Provider,{value:{location:Ne({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:re.Pop}},x):x}function zs(){let r=Zs(),e=_s(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),t?m.createElement("pre",{style:n},t):null,null)}const Hs=m.createElement(zs,null);class Ys extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?m.createElement(se.Provider,{value:this.props.routeContext},m.createElement(xr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Js(r){let{routeContext:e,match:t,children:s}=r,n=m.useContext(dt);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(se.Provider,{value:e},s)}function Ks(r,e,t,s){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var a;if(!t)return null;if(t.errors)r=t.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=(n=t)==null?void 0:n.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||A(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=t,p=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let g,p=!1,y=null,x=null;t&&(g=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||Hs,c&&(u<0&&h===0?(p=!0,x=null):u===h&&(p=!0,x=f.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,h+1)),v=()=>{let R;return g?R=y:p?R=x:f.route.Component?R=m.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=d,m.createElement(Js,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:t!=null},children:R})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(Ys,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var wr=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(wr||{}),Fe=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Fe||{});function Qs(r){let e=m.useContext(dt);return e||A(!1),e}function Xs(r){let e=m.useContext(qs);return e||A(!1),e}function Gs(r){let e=m.useContext(se);return e||A(!1),e}function vr(r){let e=Gs(),t=e.matches[e.matches.length-1];return t.route.id||A(!1),t.route.id}function Zs(){var r;let e=m.useContext(xr),t=Xs(Fe.UseRouteError),s=vr(Fe.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function en(){let{router:r}=Qs(wr.UseNavigateStable),e=vr(Fe.UseNavigateStable),t=m.useRef(!1);return yr(()=>{t.current=!0}),m.useCallback(function(n,a){a===void 0&&(a={}),t.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,Ne({fromRouteId:e},a)))},[r,e])}function tn(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Sr(r){let{to:e,replace:t,state:s,relative:n}=r;Pe()||A(!1);let{future:a,static:o}=m.useContext(Ee),{matches:l}=m.useContext(se),{pathname:c}=ht(),u=Oe(),d=mr(e,gr(l,a.v7_relativeSplatPath),c,n==="path"),f=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(f),{replace:t,state:s,relative:n}),[u,f,n,t,s]),null}function oe(r){A(!1)}function rn(r){let{basename:e="/",children:t=null,location:s,navigationType:n=re.Pop,navigator:a,static:o=!1,future:l}=r;Pe()&&A(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:a,static:o,future:Ne({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof s=="string"&&(s=me(s));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:p="default"}=s,y=m.useMemo(()=>{let x=fr(d,c);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:p},navigationType:n}},[c,d,f,h,g,p,n]);return y==null?null:m.createElement(Ee.Provider,{value:u},m.createElement(Be.Provider,{children:t,value:y}))}function sn(r){let{children:e,location:t}=r;return Vs(at(e),t)}new Promise(()=>{});function at(r,e){e===void 0&&(e=[]);let t=[];return m.Children.forEach(r,(s,n)=>{if(!m.isValidElement(s))return;let a=[...e,n];if(s.type===m.Fragment){t.push.apply(t,at(s.props.children,a));return}s.type!==oe&&A(!1),!s.props.index||!s.props.children||A(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=at(s.props.children,a)),t.push(o)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const nn="6";try{window.__reactRouterVersion=nn}catch{}const an="startTransition",kt=is[an];function on(r){let{basename:e,children:t,future:s,window:n}=r,a=m.useRef();a.current==null&&(a.current=ps({window:n,v5Compat:!0}));let o=a.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=m.useCallback(f=>{u&&kt?kt(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>tn(s),[s]),m.createElement(rn,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:s})}var Ct;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Ct||(Ct={}));var Et;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Et||(Et={}));const ln={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwaHZjdHdieHRwbXBvcWNyY21vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjM1NTEsImV4cCI6MjA1NDQzOTU1MX0.2BuUOoancwcMyG3IgotowtfaIB6yr9ZgC9unpGfL8xY",VITE_SUPABASE_URL:"https://lphvctwbxtpmpoqcrcmo.supabase.co"},Pt=r=>{let e;const t=new Set,s=(d,f)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(p=>p(e,g))}},n=()=>e,c={setState:s,getState:n,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(ln?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=r(s,n,c);return c},cn=r=>r?Pt(r):Pt;var Nr={exports:{}},jr={},kr={exports:{}},Cr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge=m;function un(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var dn=typeof Object.is=="function"?Object.is:un,hn=ge.useState,fn=ge.useEffect,gn=ge.useLayoutEffect,mn=ge.useDebugValue;function pn(r,e){var t=e(),s=hn({inst:{value:t,getSnapshot:e}}),n=s[0].inst,a=s[1];return gn(function(){n.value=t,n.getSnapshot=e,Ze(n)&&a({inst:n})},[r,t,e]),fn(function(){return Ze(n)&&a({inst:n}),r(function(){Ze(n)&&a({inst:n})})},[r]),mn(t),t}function Ze(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!dn(r,t)}catch{return!0}}function xn(r,e){return e()}var yn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xn:pn;Cr.useSyncExternalStore=ge.useSyncExternalStore!==void 0?ge.useSyncExternalStore:yn;kr.exports=Cr;var bn=kr.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze=m,wn=bn;function vn(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Sn=typeof Object.is=="function"?Object.is:vn,Nn=wn.useSyncExternalStore,jn=ze.useRef,kn=ze.useEffect,Cn=ze.useMemo,En=ze.useDebugValue;jr.useSyncExternalStoreWithSelector=function(r,e,t,s,n){var a=jn(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Cn(function(){function c(g){if(!u){if(u=!0,d=g,g=s(g),n!==void 0&&o.hasValue){var p=o.value;if(n(p,g))return f=p}return f=g}if(p=f,Sn(d,g))return p;var y=s(g);return n!==void 0&&n(p,y)?(d=g,p):(d=g,f=y)}var u=!1,d,f,h=t===void 0?null:t;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,t,s,n]);var l=Nn(r,a[0],a[1]);return kn(function(){o.hasValue=!0,o.value=l},[l]),En(l),l};Nr.exports=jr;var Pn=Nr.exports;const On=ls(Pn),Er={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwaHZjdHdieHRwbXBvcWNyY21vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjM1NTEsImV4cCI6MjA1NDQzOTU1MX0.2BuUOoancwcMyG3IgotowtfaIB6yr9ZgC9unpGfL8xY",VITE_SUPABASE_URL:"https://lphvctwbxtpmpoqcrcmo.supabase.co"},{useDebugValue:Ln}=ar,{useSyncExternalStoreWithSelector:Rn}=On;let Ot=!1;const Mn=r=>r;function In(r,e=Mn,t){(Er?"production":void 0)!=="production"&&t&&!Ot&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ot=!0);const s=Rn(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return Ln(s),s}const Lt=r=>{(Er?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?cn(r):r,t=(s,n)=>In(e,s,n);return Object.assign(t,e),t},He=r=>r?Lt(r):Lt,Dn="https://lphvctwbxtpmpoqcrcmo.supabase.co",Tn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwaHZjdHdieHRwbXBvcWNyY21vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjM1NTEsImV4cCI6MjA1NDQzOTU1MX0.2BuUOoancwcMyG3IgotowtfaIB6yr9ZgC9unpGfL8xY",S=cs(Dn,Tn,{auth:{persistSession:!0,detectSessionInUrl:!0,autoRefreshToken:!0,storage:localStorage},global:{headers:{"X-Client-Info":"medchat-mobile"}},realtime:{params:{eventsPerSecond:10}},storage:{retryAttempts:3,retryInterval:1e3}});S.auth.onAuthStateChange((r,e)=>{(r==="SIGNED_OUT"||r==="TOKEN_REFRESHED")&&(localStorage.clear(),S.getChannels().forEach(t=>{S.removeChannel(t)}))});const et=async()=>{try{const{data:{session:r},error:e}=await S.auth.getSession();return!(e||!r)}catch{return!1}},ue=He(r=>({user:null,profile:null,loading:!0,error:null,clearError:()=>r({error:null}),signIn:async(e,t)=>{try{r({loading:!0,error:null});const{error:s,data:n}=await S.auth.signInWithPassword({email:e,password:t});if(s)throw s.message.includes("Invalid login credentials")?new Error("Invalid email or password"):s;if(!n.user)throw new Error("Failed to get user data");const{data:a,error:o}=await S.from("profiles").select("*").eq("id",n.user.id).single();if(o)throw new Error("Failed to load user profile");if(!a.hospital_id)throw new Error("User not assigned to a hospital");r({user:n.user,profile:a,loading:!1,error:null})}catch(s){throw console.error("Sign in error:",s),r({loading:!1,error:s instanceof Error?s.message:"Sign in failed",user:null,profile:null}),s}},signUp:async(e,t,s,n,a)=>{try{r({loading:!0,error:null});const{error:o,data:l}=await S.auth.signUp({email:e,password:t,options:{data:{name:s}}});if(o)throw o.message.includes("User already registered")?new Error("Email already registered"):o;if(!l.user)throw new Error("Failed to create user");const{error:c}=await S.from("profiles").insert([{id:l.user.id,name:s,email:e,role:n,hospital_id:a,shift:"day",social_links:{}}]).select().single();if(c)throw new Error("Failed to create user profile");await r({user:l.user,loading:!1,error:null})}catch(o){throw console.error("Sign up error:",o),r({loading:!1,error:o instanceof Error?o.message:"Sign up failed",user:null,profile:null}),o}},signOut:async()=>{try{r({loading:!0,error:null});const{error:e}=await S.auth.signOut();if(e)throw e;r({user:null,profile:null,loading:!1,error:null})}catch(e){throw console.error("Sign out error:",e),r({loading:!1,error:e instanceof Error?e.message:"Sign out failed"}),e}},loadUser:async()=>{try{r({loading:!0,error:null});const{data:{session:e},error:t}=await S.auth.getSession();if(t)throw t;if(!e){r({user:null,profile:null,loading:!1,error:null});return}const{data:s,error:n}=await S.from("profiles").select("*").eq("id",e.user.id).single();if(n)throw new Error("Failed to load user profile");if(!s.hospital_id)throw new Error("User not assigned to a hospital");r({user:e.user,profile:s,loading:!1,error:null})}catch(e){console.error("Error loading user:",e),r({loading:!1,error:e instanceof Error?e.message:"Failed to load user",user:null,profile:null})}}}));function Fn(){const[r,e]=m.useState(""),[t,s]=m.useState(""),[n,a]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState(""),[d,f]=m.useState(!1),[h,g]=m.useState([]),[p,y]=m.useState([]),[x,b]=m.useState(""),[v,R]=m.useState(""),[w,C]=m.useState("nurse"),P=Oe(),{signIn:L,signUp:K,user:M,clearError:E}=ue();m.useEffect(()=>{M&&P("/")},[M,P]),m.useEffect(()=>{V()},[]),m.useEffect(()=>{x?W(x):(y([]),R(""))},[x]);const V=async()=>{try{const{data:k,error:D}=await S.from("regions").select("*").order("name_cs");if(D)throw D;g(k||[])}catch(k){console.error("Error loading regions:",k)}},W=async k=>{try{const{data:D,error:F}=await S.from("hospitals").select("*").eq("region_id",k).order("name");if(F)throw F;y(D||[]),R("")}catch(D){console.error("Error loading hospitals:",D)}},U=async k=>{k.preventDefault(),u(""),f(!0),E();try{if(!r||!t)throw new Error("Пожалуйста, заполните все обязательные поля");if(o){if(!n)throw new Error("Пожалуйста, введите ваше имя");if(!v)throw new Error("Пожалуйста, выберите больницу");if(!w)throw new Error("Пожалуйста, выберите роль");await K(r,t,n,w,v)}else await L(r,t);P("/")}catch(D){let F="Произошла ошибка";D instanceof Error&&(D.message.includes("invalid_credentials")?F="Неверный email или пароль":D.message.includes("Email not confirmed")?F="Пожалуйста, подтвердите ваш email":D.message.includes("User already registered")||D.message.includes("user_already_exists")?F="Этот email уже зарегистрирован":D.message.includes("Invalid email")?F="Пожалуйста, введите корректный email":D.message.includes("Weak password")?F="Пароль должен содержать минимум 6 символов":F=D.message),u(F)}finally{f(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-24 h-24 relative overflow-hidden rounded-2xl shadow-xl",children:i.jsx("img",{src:"https://lphvctwbxtpmpoqcrcmo.supabase.co/storage/v1/object/public/MedOk_logos/logo.jpg",alt:"MedOK Logo",className:"w-full h-full object-cover"})})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"MedOK"})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[i.jsxs("div",{className:"flex justify-center space-x-8 mb-8",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),u(""),E()},className:`text-gray-500 font-medium pb-1 border-b-2 ${o?"border-transparent hover:text-gray-700":"border-blue-600 text-blue-600"}`,children:"Sign In"}),i.jsx("button",{type:"button",onClick:()=>{l(!0),u(""),E()},className:`text-gray-500 font-medium pb-1 border-b-2 ${o?"border-blue-600 text-blue-600":"border-transparent hover:text-gray-700"}`,children:"Sign Up"})]}),c&&i.jsx("div",{className:"mb-4 p-3 text-sm text-red-600 bg-red-50 rounded-md border border-red-200",children:c}),i.jsxs("form",{className:"space-y-6",onSubmit:U,method:"POST",children:[o&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signup-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"signup-name",name:"name",type:"text",required:o,value:n,onChange:k=>a(k.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your full name"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:k=>e(k.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"})})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"region",className:"block text-sm font-medium text-gray-700",children:"Region"}),i.jsx("div",{className:"mt-1",children:i.jsxs("select",{id:"region",value:x,onChange:k=>b(k.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[i.jsx("option",{value:"",children:"Select region"}),h.map(k=>i.jsx("option",{value:k.id,children:k.name_cs},k.id))]})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"hospital",className:"block text-sm font-medium text-gray-700",children:"Hospital"}),i.jsx("div",{className:"mt-1",children:i.jsxs("select",{id:"hospital",value:v,onChange:k=>R(k.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!x,children:[i.jsx("option",{value:"",children:"Select hospital"}),p.map(k=>i.jsx("option",{value:k.id,children:k.name},k.id))]})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),i.jsx("div",{className:"mt-1",children:i.jsxs("select",{id:"role",value:w,onChange:k=>C(k.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[i.jsx("option",{value:"nurse",children:"Nurse"}),i.jsx("option",{value:"doctor",children:"Doctor"}),i.jsx("option",{value:"assistant",children:"Assistant"}),i.jsx("option",{value:"headNurse",children:"Head Nurse"})]})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700",children:"Password"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"current-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:k=>s(k.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",minLength:6})}),o&&i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Password must be at least 6 characters"})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?i.jsxs("span",{className:"flex items-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):o?"Sign Up":"Sign In"})})]})]})})]})}function $n(){if(console&&console.warn){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];ce(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Rt={};function ot(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];ce(e[0])&&Rt[e[0]]||(ce(e[0])&&(Rt[e[0]]=new Date),$n(...e))}const Pr=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Mt=(r,e,t)=>{r.loadNamespaces(e,Pr(r,t))},It=(r,e,t,s)=>{ce(t)&&(t=[t]),t.forEach(n=>{r.options.ns.indexOf(n)<0&&r.options.ns.push(n)}),r.loadLanguages(e,Pr(r,s))},Un=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.languages[0],n=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=e.services.backendConnector.state[`${l}|${c}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(s,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(s,r)&&(!n||o(a,r)))},_n=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(ot("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,a)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,r))return!1}}):Un(r,e,t)},ce=r=>typeof r=="string",An=r=>typeof r=="object"&&r!==null,qn=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Wn={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Vn=r=>Wn[r],Bn=r=>r.replace(qn,Vn);let it={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Bn};const zn=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};it={...it,...r}},Hn=()=>it;let Or;const Yn=r=>{Or=r},Jn=()=>Or,Kn={type:"3rdParty",init(r){zn(r.options.react),Yn(r)}},Qn=m.createContext();class Xn{constructor(){yt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}}const Gn=(r,e)=>{const t=m.useRef();return m.useEffect(()=>{t.current=r},[r,e]),t.current},Lr=(r,e,t,s)=>r.getFixedT(e,t,s),Zn=(r,e,t,s)=>m.useCallback(Lr(r,e,t,s),[r,e,t,s]),Ye=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:s,defaultNS:n}=m.useContext(Qn)||{},a=t||s||Jn();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Xn),!a){ot("You will need to pass in an i18next instance by using initReactI18next");const w=(P,L)=>ce(L)?L:An(L)&&ce(L.defaultValue)?L.defaultValue:Array.isArray(P)?P[P.length-1]:P,C=[w,{},!1];return C.t=w,C.i18n={},C.ready=!1,C}a.options.react&&a.options.react.wait!==void 0&&ot("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Hn(),...a.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let u=n||a.options&&a.options.defaultNS;u=ce(u)?[u]:u||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(u);const d=(a.isInitialized||a.initializedStoreOnce)&&u.every(w=>_n(w,a,o)),f=Zn(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),h=()=>f,g=()=>Lr(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),[p,y]=m.useState(h);let x=u.join();e.lng&&(x=`${e.lng}${x}`);const b=Gn(x),v=m.useRef(!0);m.useEffect(()=>{const{bindI18n:w,bindI18nStore:C}=o;v.current=!0,!d&&!l&&(e.lng?It(a,e.lng,u,()=>{v.current&&y(g)}):Mt(a,u,()=>{v.current&&y(g)})),d&&b&&b!==x&&v.current&&y(g);const P=()=>{v.current&&y(g)};return w&&a&&a.on(w,P),C&&a&&a.store.on(C,P),()=>{v.current=!1,w&&a&&w.split(" ").forEach(L=>a.off(L,P)),C&&a&&C.split(" ").forEach(L=>a.store.off(L,P))}},[a,x]),m.useEffect(()=>{v.current&&d&&y(h)},[a,c,d]);const R=[p,a,d];if(R.t=p,R.i18n=a,R.ready=d,d||!d&&!l)return R;throw new Promise(w=>{e.lng?It(a,e.lng,u,()=>w()):Mt(a,u,()=>w())})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ea={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),q=(r,e)=>{const t=m.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>m.createElement("svg",{ref:d,...ea,width:n,height:n,stroke:s,strokeWidth:o?Number(a)*24/Number(n):a,className:["lucide",`lucide-${ta(r)}`,l].join(" "),...u},[...e.map(([f,h])=>m.createElement(f,h)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=q("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=q("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=q("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ma=[{code:"en",label:"EN"},{code:"ru",label:"RU"},{code:"cs",label:"CZ"},{code:"uk",label:"UA"}];function pa(){const{i18n:r,t:e}=Ye(),[t,s]=m.useState(!1),n=a=>{r.changeLanguage(a),s(!1)};return i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>s(!t),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",title:e("common.language"),children:i.jsx(oa,{className:"w-5 h-5"})}),t&&i.jsx("div",{className:"absolute right-0 mt-2 w-24 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:i.jsx("div",{className:"py-1",role:"menu",children:ma.map(a=>i.jsx("button",{onClick:()=>n(a.code),className:`block w-full px-4 py-2 text-sm text-left hover:bg-gray-100 ${r.language===a.code?"bg-blue-50 text-blue-600":"text-gray-700"}`,role:"menuitem",children:a.label},a.code))})})]})}const xa=He((r,e)=>({messages:[],rooms:[],currentRoom:null,loading:!1,error:null,clearError:()=>r({error:null}),loadRooms:async()=>{try{if(r({loading:!0,error:null}),!await et()){r({rooms:[],currentRoom:null,loading:!1,error:null});return}const{data:{user:s}}=await S.auth.getUser();if(!s){r({rooms:[],currentRoom:null,loading:!1,error:null});return}const{data:n,error:a}=await S.from("chat_rooms").select("*").order("created_at",{ascending:!0});if(a){if(a.message.includes("JWT")){r({rooms:[],currentRoom:null,loading:!1,error:null});return}throw a}const o=n||[];r({rooms:o,currentRoom:e().currentRoom||o[0]||null,loading:!1,error:null}),e().currentRoom&&await e().loadMessages(e().currentRoom.id)}catch(t){console.error("Error loading rooms:",t),r({loading:!1,error:null,rooms:e().rooms,currentRoom:e().currentRoom})}},loadMessages:async t=>{let s;try{if(r({loading:!0,error:null}),!await et()){r({messages:[],loading:!1,error:null});return}const{data:{user:a}}=await S.auth.getUser();if(!a){r({messages:[],loading:!1,error:null});return}S.getChannels().forEach(c=>{c.topic.includes("room:")&&S.removeChannel(c)});const{data:o,error:l}=await S.from("messages").select(`
          *,
          user:profiles(name, avatar_url, role)
        `).eq("room_id",t).order("created_at",{ascending:!0});if(l){if(l.message.includes("JWT")){r({messages:[],loading:!1,error:null});return}throw l}return r({messages:o||[],loading:!1,error:null}),s=S.channel(`room:${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`room_id=eq.${t}`},async c=>{const{data:u}=c;if(u)try{const{data:d,error:f}=await S.from("profiles").select("name, avatar_url, role").eq("id",u.user_id).single();!f&&d&&r(h=>({messages:[...h.messages,{...u,user:d}]}))}catch(d){console.error("Error fetching user data for message:",d)}}).subscribe(c=>{c==="SUBSCRIBED"&&console.log("Successfully subscribed to room:",t),c==="CHANNEL_ERROR"&&(console.log("Failed to subscribe to room:",t),setTimeout(()=>{s==null||s.unsubscribe(),e().loadMessages(t)},5e3))}),()=>{s&&S.removeChannel(s)}}catch(n){console.error("Error loading messages:",n),r({loading:!1,error:null,messages:e().messages})}},sendMessage:async(t,s)=>{try{if(r({error:null}),!await et())throw new Error("Not authenticated");const{data:{user:a}}=await S.auth.getUser();if(!a)throw new Error("Not authenticated");const{error:o}=await S.from("messages").insert([{content:t,room_id:s,user_id:a.id}]);if(o)throw o}catch(n){throw console.error("Error sending message:",n),n instanceof Error&&!n.message.includes("Failed to fetch")&&r({error:n.message}),n}},setCurrentRoom:t=>{r({currentRoom:t}),e().loadMessages(t.id)}}));function H(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function G(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function Mr(r,e){const t=H(r);if(isNaN(e))return G(r,NaN);if(!e)return t;const s=t.getDate(),n=G(r,t.getTime());n.setMonth(t.getMonth()+e+1,0);const a=n.getDate();return s>=a?n:(t.setFullYear(n.getFullYear(),n.getMonth(),s),t)}const Ir=6048e5,ya=864e5;let ba={};function Je(){return ba}function je(r,e){var l,c,u,d;const t=Je(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=H(r),a=n.getDay(),o=(a<s?7:0)+a-s;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function $e(r){return je(r,{weekStartsOn:1})}function Dr(r){const e=H(r),t=e.getFullYear(),s=G(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const n=$e(s),a=G(r,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);const o=$e(a);return e.getTime()>=n.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function Ue(r){const e=H(r);return e.setHours(0,0,0,0),e}function Ut(r){const e=H(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function wa(r,e){const t=Ue(r),s=Ue(e),n=+t-Ut(t),a=+s-Ut(s);return Math.round((n-a)/ya)}function va(r){const e=Dr(r),t=G(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),$e(t)}function Sa(r){return G(r,Date.now())}function Na(r,e){const t=Ue(r),s=Ue(e);return+t==+s}function ja(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function ka(r){if(!ja(r)&&typeof r!="number")return!1;const e=H(r);return!isNaN(Number(e))}function lt(r){const e=H(r),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function ct(r){const e=H(r);return e.setDate(1),e.setHours(0,0,0,0),e}function Ca(r){const e=H(r),t=G(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Ea={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pa=(r,e,t)=>{let s;const n=Ea[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function tt(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Oa={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},La={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ra={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ma={date:tt({formats:Oa,defaultWidth:"full"}),time:tt({formats:La,defaultWidth:"full"}),dateTime:tt({formats:Ra,defaultWidth:"full"})},Ia={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Da=(r,e,t,s)=>Ia[r];function pe(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):o;n=r.formattingValues[l]||r.formattingValues[o]}else{const o=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[l]||r.values[o]}const a=r.argumentCallback?r.argumentCallback(e):e;return n[a]}}const Ta={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fa={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$a={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ua={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_a={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Aa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qa=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Wa={ordinalNumber:qa,era:pe({values:Ta,defaultWidth:"wide"}),quarter:pe({values:Fa,defaultWidth:"wide",argumentCallback:r=>r-1}),month:pe({values:$a,defaultWidth:"wide"}),day:pe({values:Ua,defaultWidth:"wide"}),dayPeriod:pe({values:_a,defaultWidth:"wide",formattingValues:Aa,defaultFormattingWidth:"wide"})};function xe(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],a=e.match(n);if(!a)return null;const o=a[0],l=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?Ba(l,f=>f.test(o)):Va(l,f=>f.test(o));let u;u=r.valueCallback?r.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Va(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Ba(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function za(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],a=e.match(r.parsePattern);if(!a)return null;let o=r.valueCallback?r.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(n.length);return{value:o,rest:l}}}const Ha=/^(\d+)(th|st|nd|rd)?/i,Ya=/\d+/i,Ja={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ka={any:[/^b/i,/^(a|c)/i]},Qa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xa={any:[/1/i,/2/i,/3/i,/4/i]},Ga={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Za={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eo={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},to={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ro={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},so={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},no={ordinalNumber:za({matchPattern:Ha,parsePattern:Ya,valueCallback:r=>parseInt(r,10)}),era:xe({matchPatterns:Ja,defaultMatchWidth:"wide",parsePatterns:Ka,defaultParseWidth:"any"}),quarter:xe({matchPatterns:Qa,defaultMatchWidth:"wide",parsePatterns:Xa,defaultParseWidth:"any",valueCallback:r=>r+1}),month:xe({matchPatterns:Ga,defaultMatchWidth:"wide",parsePatterns:Za,defaultParseWidth:"any"}),day:xe({matchPatterns:eo,defaultMatchWidth:"wide",parsePatterns:to,defaultParseWidth:"any"}),dayPeriod:xe({matchPatterns:ro,defaultMatchWidth:"any",parsePatterns:so,defaultParseWidth:"any"})},ao={code:"en-US",formatDistance:Pa,formatLong:Ma,formatRelative:Da,localize:Wa,match:no,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oo(r){const e=H(r);return wa(e,Ca(e))+1}function io(r){const e=H(r),t=+$e(e)-+va(e);return Math.round(t/Ir)+1}function Tr(r,e){var d,f,h,g;const t=H(r),s=t.getFullYear(),n=Je(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(h=n.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,o=G(r,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=je(o,e),c=G(r,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const u=je(c,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function lo(r,e){var l,c,u,d;const t=Je(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,n=Tr(r,e),a=G(r,0);return a.setFullYear(n,0,s),a.setHours(0,0,0,0),je(a,e)}function co(r,e){const t=H(r),s=+je(t,e)-+lo(t,e);return Math.round(s/Ir)+1}function I(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const te={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return I(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):I(t+1,2)},d(r,e){return I(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return I(r.getHours()%12||12,e.length)},H(r,e){return I(r.getHours(),e.length)},m(r,e){return I(r.getMinutes(),e.length)},s(r,e){return I(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),n=Math.trunc(s*Math.pow(10,t-3));return I(n,e.length)}},de={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_t={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),n=s>0?s:1-s;return t.ordinalNumber(n,{unit:"year"})}return te.y(r,e)},Y:function(r,e,t,s){const n=Tr(r,s),a=n>0?n:1-n;if(e==="YY"){const o=a%100;return I(o,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):I(a,e.length)},R:function(r,e){const t=Dr(r);return I(t,e.length)},u:function(r,e){const t=r.getFullYear();return I(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return I(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return I(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return te.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return I(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const n=co(r,s);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):I(n,e.length)},I:function(r,e,t){const s=io(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):I(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):te.d(r,e)},D:function(r,e,t){const s=oo(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):I(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const n=r.getDay(),a=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return I(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const n=r.getDay(),a=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return I(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return I(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let n;switch(s===12?n=de.noon:s===0?n=de.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let n;switch(s>=17?n=de.evening:s>=12?n=de.afternoon:s>=4?n=de.morning:n=de.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return te.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):te.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):I(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):I(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):te.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):te.s(r,e)},S:function(r,e){return te.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return qt(s);case"XXXX":case"XX":return ie(s);case"XXXXX":case"XXX":default:return ie(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return qt(s);case"xxxx":case"xx":return ie(s);case"xxxxx":case"xxx":default:return ie(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+At(s,":");case"OOOO":default:return"GMT"+ie(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+At(s,":");case"zzzz":default:return"GMT"+ie(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return I(s,e.length)},T:function(r,e,t){const s=r.getTime();return I(s,e.length)}};function At(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Math.trunc(s/60),a=s%60;return a===0?t+String(n):t+String(n)+e+I(a,2)}function qt(r,e){return r%60===0?(r>0?"-":"+")+I(Math.abs(r)/60,2):ie(r,e)}function ie(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=I(Math.trunc(s/60),2),a=I(s%60,2);return t+n+e+a}const Wt=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Fr=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},uo=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],n=t[2];if(!n)return Wt(r,e);let a;switch(s){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Wt(s,e)).replace("{{time}}",Fr(n,e))},ho={p:Fr,P:uo},fo=/^D+$/,go=/^Y+$/,mo=["D","DD","YY","YYYY"];function po(r){return fo.test(r)}function xo(r){return go.test(r)}function yo(r,e,t){const s=bo(r,e,t);if(console.warn(s),mo.includes(r))throw new RangeError(s)}function bo(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,So=/^'([^]*?)'?$/,No=/''/g,jo=/[a-zA-Z]/;function Q(r,e,t){var d,f,h,g;const s=Je(),n=s.locale??ao,a=s.firstWeekContainsDate??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=s.weekStartsOn??((g=(h=s.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,l=H(r);if(!ka(l))throw new RangeError("Invalid time value");let c=e.match(vo).map(p=>{const y=p[0];if(y==="p"||y==="P"){const x=ho[y];return x(p,n.formatLong)}return p}).join("").match(wo).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const y=p[0];if(y==="'")return{isToken:!1,value:ko(p)};if(_t[y])return{isToken:!0,value:p};if(y.match(jo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:n};return c.map(p=>{if(!p.isToken)return p.value;const y=p.value;(xo(y)||po(y))&&yo(y,e,String(r));const x=_t[y[0]];return x(l,y,n.localize,u)}).join("")}function ko(r){const e=r.match(So);return e?e[1].replace(No,"'"):r}function Co(r){return Na(r,Sa(r))}function Eo(r,e){return Mr(r,-e)}const $r=He((r,e)=>({shifts:[],requests:[],loading:!1,error:null,loadShifts:async t=>{try{r({loading:!0,error:null});const{data:{user:s}}=await S.auth.getUser();if(!s)throw new Error("Not authenticated");const n=Q(ct(t),"yyyy-MM-dd"),a=Q(lt(t),"yyyy-MM-dd"),{data:o,error:l}=await S.from("shifts").select("*").eq("user_id",s.id).gte("date",n).lte("date",a).order("date",{ascending:!0});if(l)throw l;if(!o||o.length===0){const c=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),u=[];for(let g=1;g<=c;g++){const p=new Date(t.getFullYear(),t.getMonth(),g);u.push({user_id:s.id,date:Q(p,"yyyy-MM-dd"),type:g%3===0?"night":g%3===1?"day":"off"})}const d=10;for(let g=0;g<u.length;g+=d){const p=u.slice(g,g+d),{error:y}=await S.from("shifts").upsert(p,{onConflict:"user_id,date",ignoreDuplicates:!1});if(y)throw y}const{data:f,error:h}=await S.from("shifts").select("*").eq("user_id",s.id).gte("date",n).lte("date",a).order("date",{ascending:!0});if(h)throw h;r({shifts:f||[],error:null})}else r({shifts:o,error:null})}catch(s){console.error("Error in loadShifts:",s),r({error:s instanceof Error?s.message:"Failed to load shifts",loading:!1})}finally{r({loading:!1})}},loadRequests:async()=>{try{r({loading:!0,error:null});const{data:{user:t}}=await S.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:s,error:n}=await S.from("shift_exchange_requests").select(`
          *,
          shifts (*),
          requester:profiles!shift_exchange_requests_requester_id_fkey (name),
          requested:profiles!shift_exchange_requests_requested_id_fkey (name)
        `).or(`requester_id.eq.${t.id},requested_id.eq.${t.id}`).order("created_at",{ascending:!1});if(n)throw n;r({requests:s||[],error:null})}catch(t){r({error:t instanceof Error?t.message:"Failed to load requests",loading:!1})}finally{r({loading:!1})}},createShift:async(t,s)=>{try{r({loading:!0,error:null});const{data:{user:n}}=await S.auth.getUser();if(!n)throw new Error("Not authenticated");const{error:a}=await S.from("shifts").upsert([{user_id:n.id,date:Q(t,"yyyy-MM-dd"),type:s}],{onConflict:"user_id,date",ignoreDuplicates:!1});if(a)throw a;await e().loadShifts(t)}catch(n){r({error:n instanceof Error?n.message:"Failed to create shift",loading:!1})}finally{r({loading:!1})}},updateShift:async(t,s)=>{try{r({loading:!0,error:null});const{error:n}=await S.from("shifts").update({type:s}).eq("id",t);if(n)throw n;const a=e().shifts.find(o=>o.id===t);a&&await e().loadShifts(new Date(a.date))}catch(n){r({error:n instanceof Error?n.message:"Failed to update shift",loading:!1})}finally{r({loading:!1})}},requestExchange:async(t,s)=>{try{r({loading:!0,error:null});const{data:{user:n}}=await S.auth.getUser();if(!n)throw new Error("Not authenticated");const{error:a}=await S.from("shift_exchange_requests").insert([{requester_id:n.id,requested_id:s,shift_id:t,status:"pending"}]);if(a)throw a;await e().loadRequests()}catch(n){r({error:n instanceof Error?n.message:"Failed to request exchange",loading:!1})}finally{r({loading:!1})}},respondToRequest:async(t,s)=>{try{r({loading:!0,error:null});const{error:n}=await S.from("shift_exchange_requests").update({status:s?"accepted":"rejected"}).eq("id",t);if(n)throw n;await e().loadRequests()}catch(n){r({error:n instanceof Error?n.message:"Failed to respond to request",loading:!1})}finally{r({loading:!1})}}})),Po=He((r,e)=>({members:[],loading:!1,error:null,loadMembers:async()=>{try{r({loading:!0,error:null});const{data:{user:t}}=await S.auth.getUser();if(!t){r({members:[],loading:!1,error:null});return}const{data:s,error:n}=await S.from("profiles").select("hospital_id").eq("id",t.id).single();if(n)throw n;if(!(s!=null&&s.hospital_id)){r({members:[],loading:!1,error:"User not assigned to a hospital"});return}const{data:a,error:o}=await S.from("profiles").select("*").eq("hospital_id",s.hospital_id).order("role",{ascending:!0}).order("name",{ascending:!0});if(o){if(o.message.includes("JWT")){r({members:[],loading:!1,error:null});return}throw o}r({members:a||[],loading:!1,error:null})}catch(t){console.error("Error loading team members:",t),r({loading:!1,error:t instanceof Error?t.message:"Failed to load team members",members:[]})}}}));function Oo({isOpen:r,onClose:e}){const[t,s]=m.useState(""),[n,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(null),[d,f]=m.useState(null),[h,g]=m.useState(!1),{t:p}=Ye(),{changePassword:y}=ue();if(!r)return null;const x=async b=>{if(b.preventDefault(),u(null),f(null),n!==o){u(p("auth.passwordsDoNotMatch"));return}if(n.length<6){u(p("auth.passwordTooShort"));return}try{g(!0),await y(t,n),f(p("auth.passwordChangeSuccess")),setTimeout(()=>{s(""),a(""),l(""),e()},2e3)}catch(v){u(v instanceof Error?v.message:p("auth.passwordChangeError"))}finally{g(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-lg shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:p("auth.changePassword")}),i.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-100",children:i.jsx(ft,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:x,className:"p-4 space-y-4",children:[c&&i.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md border border-red-200",children:c}),d&&i.jsx("div",{className:"p-3 text-sm text-green-600 bg-green-50 rounded-md border border-green-200",children:d}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700",children:p("auth.currentPassword")}),i.jsx("input",{type:"password",id:"current-password",value:t,onChange:b=>s(b.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:p("auth.newPassword")}),i.jsx("input",{type:"password",id:"new-password",value:n,onChange:b=>a(b.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:p("auth.confirmPassword")}),i.jsx("input",{type:"password",id:"confirm-password",value:o,onChange:b=>l(b.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?i.jsxs("span",{className:"flex items-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p("auth.processing")]}):p("auth.updatePassword")})})]})]})})}const Lo=(r,e)=>e(`roles.${r}`),Ro=r=>{switch(r){case"doctor":return"text-blue-600";case"nurse":return"text-green-600";case"assistant":return"text-orange-600";case"headNurse":return"text-purple-600";default:return"text-gray-600"}},Mo=({shift:r,onClose:e,onExchangeRequest:t})=>{const[s,n]=m.useState([]),[a,o]=m.useState([]),[l,c]=m.useState(!0),[u,d]=m.useState(null),[f,h]=m.useState("exchange"),{profile:g}=ue(),{t:p}=Ye();if(m.useEffect(()=>{(async()=>{if(!(r!=null&&r.type)||!(g!=null&&g.id)||!(g!=null&&g.hospital_id)){c(!1);return}try{c(!0),d(null);const{data:b,error:v}=await S.from("profiles").select("id, name, avatar_url, role, shift, hospital_id").eq("hospital_id",g.hospital_id).neq("id",g.id).neq("shift",r.type);if(v)throw v;n(b||[]);const{data:R,error:w}=await S.from("profiles").select("id, name, avatar_url, role, shift, hospital_id").eq("hospital_id",g.hospital_id).neq("id",g.id).eq("shift",r.type);if(w)throw w;o(R||[])}catch(b){console.error("Error loading colleagues:",b),d(b instanceof Error?b.message:"Failed to load colleagues"),n([]),o([])}finally{c(!1)}})()},[r==null?void 0:r.type,g==null?void 0:g.id,g==null?void 0:g.hospital_id]),!r)return null;const y=x=>i.jsx("div",{className:"space-y-3",children:x.map(b=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:b.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(b.name)}&background=random`,alt:b.name,className:"w-10 h-10 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[b.name,i.jsxs("span",{className:`ml-2 text-xs font-medium ${Ro(b.role)}`,children:["(",Lo(b.role,p),")"]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:p(`shifts.${b.shift}`)})]})]}),f==="exchange"&&i.jsx("button",{onClick:()=>t(b.id),className:"p-2 text-blue-600 hover:text-blue-700 rounded-full hover:bg-blue-50",children:i.jsx(ua,{className:"w-5 h-5"})})]},b.id))});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Q(new Date(r.date),"MMMM d, yyyy")}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p(`shifts.${r.type}`)})]}),i.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-100",children:i.jsx(ft,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"border-b",children:i.jsxs("div",{className:"flex",children:[i.jsx("button",{onClick:()=>h("exchange"),className:`flex-1 py-3 px-4 text-sm font-medium ${f==="exchange"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:p("modal.availableColleagues")}),i.jsx("button",{onClick:()=>h("shift"),className:`flex-1 py-3 px-4 text-sm font-medium ${f==="shift"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:p("modal.shiftColleagues")})]})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:p(f==="exchange"?"modal.availableColleagues":"modal.shiftColleagues")}),u?i.jsx("div",{className:"text-center text-red-600 py-4",children:u}):l?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):f==="exchange"?s.length>0?y(s):i.jsx("p",{className:"text-center text-gray-500 py-4",children:p("modal.noColleagues")}):a.length>0?y(a):i.jsx("p",{className:"text-center text-gray-500 py-4",children:p("modal.noShiftColleagues")})]})]})})},Io=()=>{const r=Oe(),{t:e}=Ye(),{profile:t,signOut:s}=ue(),{rooms:n,messages:a,currentRoom:o,loadRooms:l,loadMessages:c,sendMessage:u,setCurrentRoom:d}=xa(),{shifts:f,loading:h,error:g,loadShifts:p,updateShift:y,requestExchange:x}=$r(),{members:b,loadMembers:v}=Po(),R=m.useRef(null),[w,C]=m.useState("chat"),[P,L]=m.useState(null),[K,M]=m.useState("day"),[E,V]=m.useState(!1),[W,U]=m.useState(""),[k,D]=m.useState(""),[F,ne]=m.useState(!1),[T,z]=m.useState(new Date),[Y,Le]=m.useState(""),[Re,Me]=m.useState(""),[gt,mt]=m.useState([]),[zr,Qe]=m.useState([]);m.useEffect(()=>{if(!t){r("/login");return}l(),v(),p(T)},[l,p,v,t,r,T]),m.useEffect(()=>{o&&c(o.id)},[o,c]),m.useEffect(()=>{var N;(N=R.current)==null||N.scrollIntoView({behavior:"smooth"})},[a]),m.useEffect(()=>{if(Y&&(t!=null&&t.hospital_id)){const N=b.filter(_=>_.role===Y&&_.hospital_id===t.hospital_id&&_.id!==t.id);mt(N),Me("")}else mt([]),Me("")},[Y,b,t==null?void 0:t.hospital_id,t==null?void 0:t.id]),m.useEffect(()=>{(async()=>{if(!Re){Qe([]);return}try{const _=Q(ct(T),"yyyy-MM-dd"),Z=Q(lt(T),"yyyy-MM-dd"),{data:$,error:O}=await S.from("shifts").select("*").eq("user_id",Re).gte("date",_).lte("date",Z).order("date",{ascending:!0});if(O)throw O;Qe($||[])}catch(_){console.error("Error loading comparison shifts:",_),Qe([])}})()},[Re,T]);const Hr=()=>{r("/profile/me")},Yr=async()=>{try{await s(),r("/login")}catch(N){console.error("Error signing out:",N)}},Jr=async N=>{if(N.preventDefault(),!(!o||!W.trim()))try{await u(W.trim(),o.id),U("")}catch(_){console.error("Error sending message:",_)}},Kr=async N=>{if(E)try{await y(N.id,K)}catch(_){console.error("Error updating shift:",_)}else L(N)},Qr=async N=>{if(P!=null&&P.id)try{await x(P.id,N),L(null)}catch(_){console.error("Error requesting exchange:",_)}},Xr=()=>{z(N=>Eo(N,1))},Gr=()=>{z(N=>Mr(N,1))},Xe=N=>{switch(N){case"day":return i.jsx(Ft,{className:"w-4 h-4 text-yellow-600"});case"night":return i.jsx(Tt,{className:"w-4 h-4 text-purple-600"});case"off":return i.jsx(Dt,{className:"w-4 h-4 text-green-600"});default:return null}},Zr=N=>{switch(N){case"day":return"bg-yellow-100 hover:bg-yellow-200";case"night":return"bg-purple-100 hover:bg-purple-200";case"off":return"bg-green-100 hover:bg-green-200";default:return"bg-gray-100 hover:bg-gray-200"}},es=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"sticky top-0 bg-white z-10 pb-4",children:i.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:n.map(N=>i.jsx("button",{onClick:()=>d(N),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap
                ${(o==null?void 0:o.id)===N.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:e(`chatRooms.${N.type}`)},N.id))})}),i.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[a.map(N=>{var _,Z,$,O;return i.jsx("div",{className:`flex ${N.user_id===(t==null?void 0:t.id)?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`flex max-w-[80%] ${N.user_id===(t==null?void 0:t.id)?"flex-row-reverse":"flex-row"}`,children:[i.jsx("button",{onClick:()=>r(`/profile/${N.user_id}`),className:"flex-shrink-0",children:i.jsx("img",{src:((_=N.user)==null?void 0:_.avatar_url)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((Z=N.user)==null?void 0:Z.name)||"User")}&background=random`,alt:(($=N.user)==null?void 0:$.name)||"User",className:`w-8 h-8 rounded-full object-cover ${N.user_id===(t==null?void 0:t.id)?"ml-2":"mr-2"}`})}),i.jsxs("div",{className:`flex flex-col ${N.user_id===(t==null?void 0:t.id)?"items-end mr-2":"items-start ml-2"}`,children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("button",{onClick:()=>r(`/profile/${N.user_id}`),className:`text-sm font-medium hover:underline ${N.user_id===(t==null?void 0:t.id)?"text-blue-600":"text-gray-900"}`,children:N.user_id===(t==null?void 0:t.id)?e("chat.you"):((O=N.user)==null?void 0:O.name)||"User"}),i.jsx("span",{className:"text-xs text-gray-400",children:Q(new Date(N.created_at),"HH:mm")})]}),i.jsx("div",{className:`p-3 rounded-lg ${N.user_id===(t==null?void 0:t.id)?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-800"}`,children:i.jsx("p",{className:"whitespace-pre-wrap break-words",children:N.content})})]})]})},N.id)}),i.jsx("div",{ref:R})]}),i.jsx("div",{className:"sticky bottom-0 bg-white border-t shadow-lg",children:i.jsxs("form",{onSubmit:Jr,className:"flex space-x-2 p-4",children:[i.jsx("input",{type:"text",value:W,onChange:N=>U(N.target.value),placeholder:e("chat.typeMessage"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.jsx("button",{type:"submit",disabled:!W.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i.jsx(ha,{className:"w-5 h-5"})})]})})]}),ts=()=>{if(h)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(g)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-red-600",children:["Error loading shifts: ",g]})});const N=ct(T),_=lt(T),Z=[];let $=N;for(;$<=_;)Z.push(Q($,"yyyy-MM-dd")),$=new Date($.setDate($.getDate()+1));return i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:Xr,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:i.jsx(na,{className:"w-5 h-5"})}),i.jsx("h2",{className:"text-lg font-semibold",children:Q(T,"MMMM yyyy")}),i.jsx("button",{onClick:Gr,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:i.jsx(aa,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("select",{value:Y,onChange:O=>{Le(O.target.value),Me("")},className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:e("common.compare")}),i.jsx("option",{value:"nurse",children:e("roles.nurse")}),i.jsx("option",{value:"doctor",children:e("roles.doctor")}),i.jsx("option",{value:"assistant",children:e("roles.assistant")}),i.jsx("option",{value:"headNurse",children:e("roles.headNurse")})]}),i.jsxs("select",{value:Re,onChange:O=>Me(O.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",disabled:!Y||gt.length===0,children:[i.jsx("option",{value:"",children:e("common.selectUser")}),gt.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-200",children:[e("calendar.weekDays",{returnObjects:!0}).map(O=>i.jsx("div",{className:"bg-gray-50 p-2 text-center text-sm font-medium text-gray-500",children:O},O)),Z.map(O=>{const J=new Date(O),ee=J.getDay()||7,ss=J.getDate(),pt=Co(J),ae=f.find(Ie=>Ie.user_id===(t==null?void 0:t.id)&&Ie.date===O),xt=zr.find(Ie=>Ie.date===O);return i.jsxs("div",{onClick:()=>ae&&Kr(ae),style:{gridColumn:ee===1?1:void 0},className:`
                    relative p-3 cursor-pointer transition-colors
                    ${ae?Zr(ae.type):"bg-gray-50"}
                    ${pt?"ring-2 ring-blue-500":""}
                  `,children:[i.jsx("time",{dateTime:O,className:`text-sm font-semibold ${pt?"text-blue-700":"text-gray-900"}`,children:ss}),ae&&i.jsxs("div",{className:"mt-1 flex items-center space-x-1",children:[Xe(ae.type),i.jsx("span",{className:"text-xs text-gray-700",children:e(`shifts.${ae.type}Short`)})]}),xt&&i.jsx("div",{className:"absolute inset-0 bg-white opacity-50",style:{clipPath:"polygon(100% 0, 100% 100%, 0 100%)"},children:i.jsx("div",{className:"absolute bottom-0 right-0 p-1",children:Xe(xt.type)})})]},O)})]})}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex flex-wrap gap-4",children:E?["day","night","off"].map(O=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",name:"shiftType",value:O,checked:K===O,onChange:J=>M(J.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center ${O==="day"?"bg-yellow-100":O==="night"?"bg-purple-100":"bg-green-100"}`,children:Xe(O)}),i.jsx("span",{className:"text-sm text-gray-600",children:e(`calendar.legend.${O}Shift`)})]})]},O)):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-4 h-4 rounded bg-yellow-100 mr-2 flex items-center justify-center",children:i.jsx(Ft,{className:"w-3 h-3 text-yellow-600"})}),i.jsx("span",{className:"text-sm text-gray-600",children:e("calendar.legend.dayShift")})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-4 h-4 rounded bg-purple-100 mr-2 flex items-center justify-center",children:i.jsx(Tt,{className:"w-3 h-3 text-purple-600"})}),i.jsx("span",{className:"text-sm text-gray-600",children:e("calendar.legend.nightShift")})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-4 h-4 rounded bg-green-100 mr-2 flex items-center justify-center",children:i.jsx(Dt,{className:"w-3 h-3 text-green-600"})}),i.jsx("span",{className:"text-sm text-gray-600",children:e("calendar.legend.dayOff")})]})]})}),i.jsx("button",{onClick:()=>V(!E),className:`p-2 rounded-full ${E?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:i.jsx(Rr,{className:"w-5 h-5"})})]})})]})},rs=()=>{const _=b.filter($=>$.name.toLowerCase().includes(k.toLowerCase())).reduce(($,O)=>{const J=O.role;return $[J]||($[J]=[]),$[J].push(O),$},{}),Z={doctor:e("groups.doctors"),nurse:e("groups.nurses"),headNurse:e("groups.headNurses"),assistant:e("groups.assistants")};return i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsx("div",{className:"p-4 border-b",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:k,onChange:$=>D($.target.value),placeholder:e("common.search"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.jsx(da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})}),i.jsx("div",{className:"p-4 space-y-6",children:Object.entries(Z).map(([$,O])=>{const J=_[$]||[];return J.length===0?null:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:O}),i.jsxs("span",{className:"text-xs text-gray-500",children:[J.length," ",e("common.members")]})]}),i.jsx("div",{className:"space-y-2",children:J.map(ee=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:ee.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(ee.name)}&background=random`,alt:ee.name,className:"w-10 h-10 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:ee.name}),i.jsx("p",{className:"text-xs text-gray-500",children:e(`shifts.${ee.shift}`)})]})]}),i.jsx("button",{onClick:()=>r(`/profile/${ee.id}`),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:i.jsx($t,{className:"w-5 h-5"})})]},ee.id))})]},$)})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[i.jsx("header",{className:"bg-white shadow-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:"https://lphvctwbxtpmpoqcrcmo.supabase.co/storage/v1/object/public/MedOk_logos/logo.jpg",alt:"MedOK Logo",className:"w-10 h-10 object-cover rounded-lg"}),i.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"MedOK"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:Yr,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",title:e("common.signOut"),children:i.jsx(ia,{className:"w-5 h-5"})}),i.jsx(pa,{}),i.jsx("button",{onClick:Hr,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:i.jsx($t,{className:"w-5 h-5"})})]})]})})}),i.jsx("nav",{className:"bg-white border-t",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-around",children:[i.jsxs("button",{onClick:()=>C("chat"),className:`flex flex-col items-center py-3 px-6 text-sm font-medium ${w==="chat"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(la,{className:"w-5 h-5"}),i.jsx("span",{className:"mt-1",children:e("common.chat")})]}),i.jsxs("button",{onClick:()=>C("calendar"),className:`flex flex-col items-center py-3 px-6 text-sm font-medium ${w==="calendar"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(sa,{className:"w-5 h-5"}),i.jsx("span",{className:"mt-1",children:e("common.calendar")})]}),i.jsxs("button",{onClick:()=>C("team"),className:`flex flex-col items-center py-3 px-6 text-sm font-medium ${w==="team"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(ga,{className:"w-5 h-5"}),i.jsx("span",{className:"mt-1",children:e("common.team")})]})]})})}),i.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[w==="chat"&&es(),w==="calendar"&&ts(),w==="team"&&rs()]})}),P&&i.jsx(Mo,{shift:P,onClose:()=>L(null),onExchangeRequest:Qr}),F&&i.jsx(Oo,{isOpen:F,onClose:()=>ne(!1)})]})};function Vt(){var C,P,L,K;const r=Oe(),{userId:e}=br(),{profile:t,loadUser:s}=ue(),[n,a]=m.useState(null),[o,l]=m.useState(!1),[c,u]=m.useState(!1),[d,f]=m.useState(null),[h,g]=m.useState({name:"",phone:"",avatar:"",social_links:{whatsapp:"",telegram:"",facebook:"",instagram:""}});m.useEffect(()=>{p()},[e]);const p=async()=>{var M,E,V,W;try{const{data:U,error:k}=await S.from("profiles").select("*").eq("id",e||(t==null?void 0:t.id)).single();if(k)throw k;a(U),g({name:U.name,phone:U.phone||"",avatar:U.avatar_url||"",social_links:{whatsapp:((M=U.social_links)==null?void 0:M.whatsapp)||"",telegram:((E=U.social_links)==null?void 0:E.telegram)||"",facebook:((V=U.social_links)==null?void 0:V.facebook)||"",instagram:((W=U.social_links)==null?void 0:W.instagram)||""}})}catch(U){console.error("Error loading profile:",U),f(U instanceof Error?U.message:"Failed to load profile")}};if(!n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const y=(t==null?void 0:t.id)===n.id,x=[{name:"WhatsApp",icon:"https://cdn2.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-whatsapp-circle-512.png",link:((C=n.social_links)==null?void 0:C.whatsapp)||"#",key:"whatsapp"},{name:"Telegram",icon:"https://cdn3.iconfinder.com/data/icons/social-media-chamfered-corner/154/telegram-512.png",link:((P=n.social_links)==null?void 0:P.telegram)||"#",key:"telegram"},{name:"Facebook",icon:"https://cdn2.iconfinder.com/data/icons/social-media-2285/512/1_Facebook_colored_svg_copy-512.png",link:((L=n.social_links)==null?void 0:L.facebook)||"#",key:"facebook"},{name:"Instagram",icon:"https://cdn2.iconfinder.com/data/icons/social-media-2285/512/1_Instagram_colored_svg_1-512.png",link:((K=n.social_links)==null?void 0:K.instagram)||"#",key:"instagram"}],b=M=>M?M.replace(/\D/g,""):"",v=async M=>{var V;const E=(V=M.target.files)==null?void 0:V[0];if(!(!E||!(n!=null&&n.id)))try{if(f(null),u(!0),E.size>5*1024*1024)throw new Error("File size must be less than 5MB");if(!["image/jpeg","image/png","image/gif"].includes(E.type))throw new Error("Invalid file type. Only JPG, PNG, and GIF are allowed");const U=E.type.split("/")[1],k=`${n.id}_${Date.now()}.${U}`;if(n.avatar_url){const z=n.avatar_url.split("/").pop();if(z)try{await S.storage.from("avatars").remove([z])}catch(Y){console.warn("Failed to remove old avatar:",Y)}}const{error:D,data:F}=await S.storage.from("avatars").upload(k,E,{cacheControl:"3600",upsert:!0,contentType:E.type});if(D)throw new Error(`Upload failed: ${D.message}`);if(!(F!=null&&F.path))throw new Error("Failed to get uploaded file path");const{data:{publicUrl:ne}}=S.storage.from("avatars").getPublicUrl(F.path),{error:T}=await S.from("profiles").update({avatar_url:ne}).eq("id",n.id);if(T)throw new Error(`Profile update failed: ${T.message}`);g(z=>({...z,avatar:ne})),await p()}catch(W){console.error("Error uploading avatar:",W),f(W instanceof Error?W.message:"Failed to upload avatar")}finally{u(!1)}},R=async M=>{M.preventDefault(),f(null),u(!0);try{const{error:E}=await S.from("profiles").update({name:h.name,phone:h.phone,avatar_url:h.avatar,social_links:h.social_links}).eq("id",n.id);if(E)throw E;await p(),l(!1)}catch(E){console.error("Error updating profile:",E),f(E instanceof Error?E.message:"Failed to update profile")}finally{u(!1)}},w=()=>o?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full h-full md:h-auto md:max-h-[90vh] md:w-[600px] md:rounded-lg overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Edit Profile"}),i.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:i.jsx(ft,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[d&&i.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md border border-red-200",children:d}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:h.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name)}&background=random`,alt:"",className:"w-32 h-32 rounded-full object-cover"}),i.jsx("label",{htmlFor:"avatar-upload",className:`absolute bottom-0 right-0 p-2 rounded-full cursor-pointer transition-colors ${c?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:c?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(fa,{className:"w-5 h-5 text-white"})}),i.jsx("input",{id:"avatar-upload",type:"file",accept:"image/jpeg,image/png,image/gif",className:"hidden",onChange:v,disabled:c})]}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click the upload icon to change photo"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Maximum file size: 5MB"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",value:h.name,onChange:M=>g(E=>({...E,name:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter your full name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),i.jsx("input",{type:"tel",value:h.phone,onChange:M=>g(E=>({...E,phone:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"+1 (234) 567-890"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Social Media Links"}),x.map(({name:M,key:E})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:M}),i.jsx("input",{type:"url",value:h.social_links[E],onChange:V=>g(W=>({...W,social_links:{...W.social_links,[E]:V.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:`Enter your ${M} profile URL`})]},E))]}),i.jsx("div",{className:"sticky bottom-0 bg-white py-4 border-t",children:i.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Saving..."]}):"Save Changes"})})]})]})}):null;return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white shadow-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center h-16",children:[i.jsx("button",{onClick:()=>r(-1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full mr-4",children:i.jsx(ra,{className:"w-5 h-5"})}),i.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Profile"})]})})}),i.jsx("div",{className:"max-w-lg mx-auto bg-white shadow-lg rounded-lg overflow-hidden mt-8",children:i.jsxs("div",{className:"p-8",children:[y&&i.jsx("div",{className:"flex justify-end mb-6",children:i.jsx("button",{onClick:()=>l(!0),className:"p-2 text-gray-600 hover:text-gray-900",children:i.jsx(Rr,{className:"w-5 h-5"})})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:n.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name)}&background=random`,alt:n.name,className:"w-32 h-32 rounded-full object-cover mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.name}),i.jsx("p",{className:"text-gray-600 mb-2",children:n.role==="nurse"?"Мед.сестра":n.role==="doctor"?"Доктор":n.role==="assistant"?"Санитар":n.role==="headNurse"?"Старшая мед.сестра":n.role}),i.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:n.shift==="day"?"Дневная смена":n.shift==="night"?"Ночная смена":"Выходной"})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsx(ca,{className:"w-5 h-5 text-gray-500 mr-3"}),n.phone?i.jsx("a",{href:`tel:${b(n.phone)}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:n.phone}):i.jsx("span",{className:"text-gray-500",children:"No phone number"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-4",children:x.map(M=>i.jsxs("a",{href:M.link,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[i.jsx("img",{src:M.icon,alt:M.name,className:"w-8 h-8 mb-2"}),i.jsx("span",{className:"text-sm text-gray-600",children:M.name})]},M.name))})]})]})}),w()]})}async function Do(r,e,t,s){try{const{data:n}=await S.from("profiles").select("*").eq("id",r).single(),{data:a}=await S.from("profiles").select("*").eq("id",e).single();if(!n||!a)throw new Error("Could not find user profiles");const{error:o}=await S.functions.invoke("send-shift-exchange-response",{body:{to:n.email,responderName:a.name,shiftDate:t,accepted:s}});if(o)throw o}catch(n){throw console.error("Error sending shift exchange response email:",n),n}}function To(){const{action:r,requesterId:e,shiftDate:t}=br(),s=Oe(),{respondToRequest:n}=$r(),[a,o]=m.useState(!0),[l,c]=m.useState(null);m.useEffect(()=>{u()},[r,e,t]);const u=async()=>{try{if(o(!0),c(null),!e||!t||!r)throw new Error("Missing required parameters");const d=r==="accept";await n(e,d),await Do(e,e,t,d),s("/calendar")}catch(d){console.error("Error handling shift exchange response:",d),c(d instanceof Error?d.message:"An error occurred")}finally{o(!1)}};return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[i.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:"Error"}),i.jsx("p",{className:"text-gray-600",children:l}),i.jsx("button",{onClick:()=>s("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Return to Home"})]})}):null}function De({children:r}){const{user:e,loading:t}=ue();return t?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e?i.jsx(i.Fragment,{children:r}):i.jsx(Sr,{to:"/login",replace:!0})}function Fo(){const{loadUser:r}=ue();return ar.useEffect(()=>{r().catch(console.error)},[r]),i.jsx(on,{children:i.jsxs(sn,{children:[i.jsx(oe,{path:"/login",element:i.jsx(Fn,{})}),i.jsx(oe,{path:"/",element:i.jsx(De,{children:i.jsx(Io,{})})}),i.jsx(oe,{path:"/profile/:userId",element:i.jsx(De,{children:i.jsx(Vt,{})})}),i.jsx(oe,{path:"/profile/me",element:i.jsx(De,{children:i.jsx(Vt,{})})}),i.jsx(oe,{path:"/shift-exchange/:action/:requesterId/:shiftDate",element:i.jsx(De,{children:i.jsx(To,{})})}),i.jsx(oe,{path:"*",element:i.jsx(Sr,{to:"/",replace:!0})})]})})}const j=r=>typeof r=="string",ye=()=>{let r,e;const t=new Promise((s,n)=>{r=s,e=n});return t.resolve=r,t.reject=e,t},Bt=r=>r==null?"":""+r,$o=(r,e,t)=>{r.forEach(s=>{e[s]&&(t[s]=e[s])})},Uo=/###/g,zt=r=>r&&r.indexOf("###")>-1?r.replace(Uo,"."):r,Ht=r=>!r||j(r),ve=(r,e,t)=>{const s=j(e)?e.split("."):e;let n=0;for(;n<s.length-1;){if(Ht(r))return{};const a=zt(s[n]);!r[a]&&t&&(r[a]=new t),Object.prototype.hasOwnProperty.call(r,a)?r=r[a]:r={},++n}return Ht(r)?{}:{obj:r,k:zt(s[n])}},Yt=(r,e,t)=>{const{obj:s,k:n}=ve(r,e,Object);if(s!==void 0||e.length===1){s[n]=t;return}let a=e[e.length-1],o=e.slice(0,e.length-1),l=ve(r,o,Object);for(;l.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),l=ve(r,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=t},_o=(r,e,t,s)=>{const{obj:n,k:a}=ve(r,e,Object);n[a]=n[a]||[],n[a].push(t)},_e=(r,e)=>{const{obj:t,k:s}=ve(r,e);if(t)return t[s]},Ao=(r,e,t)=>{const s=_e(r,t);return s!==void 0?s:_e(e,t)},Ur=(r,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in r?j(r[s])||r[s]instanceof String||j(e[s])||e[s]instanceof String?t&&(r[s]=e[s]):Ur(r[s],e[s],t):r[s]=e[s]);return r},he=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var qo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Wo=r=>j(r)?r.replace(/[&<>"'\/]/g,e=>qo[e]):r;class Vo{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Bo=[" ",",","?","!",";"],zo=new Vo(20),Ho=(r,e,t)=>{e=e||"",t=t||"";const s=Bo.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(s.length===0)return!0;const n=zo.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!n.test(r);if(!a){const o=r.indexOf(t);o>0&&!n.test(r.substring(0,o))&&(a=!0)}return a},ut=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return r[e];const s=e.split(t);let n=r;for(let a=0;a<s.length;){if(!n||typeof n!="object")return;let o,l="";for(let c=a;c<s.length;++c)if(c!==a&&(l+=t),l+=s[c],o=n[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<s.length-1)continue;a+=c-a+1;break}n=o}return n},Ae=r=>r&&r.replace("_","-"),Yo={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console&&console[r]&&console[r].apply(console,e)}};class qe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Yo,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,n){return n&&!this.debug?null:(j(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new qe(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new qe(this.logger,e)}}var X=new qe;class Ke{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const n=this.observers[s].get(t)||0;this.observers[s].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,c]=o;for(let u=0;u<c;u++)l(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,c]=o;for(let u=0;u<c;u++)l.apply(l,[e,...s])})}}class Jt extends Ke{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,o=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],s&&(Array.isArray(s)?l.push(...s):j(s)&&a?l.push(...s.split(a)):l.push(s)));const c=_e(this.data,l);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=l[0],t=l[1],s=l.slice(2).join(".")),c||!o||!j(s)?c:ut(this.data&&this.data[e]&&this.data[e][t],s,a)}addResource(e,t,s,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[e,t];s&&(l=l.concat(o?s.split(o):s)),e.indexOf(".")>-1&&(l=e.split("."),n=t,t=l[1]),this.addNamespaces(t),Yt(this.data,l,n),a.silent||this.emit("added",e,t,s,n)}addResources(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in s)(j(s[a])||Array.isArray(s[a]))&&this.addResource(e,t,a,s[a],{silent:!0});n.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,n,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),n=s,s=t,t=l[1]),this.addNamespaces(t);let c=_e(this.data,l)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),n?Ur(c,s,a):c={...c,...s},Yt(this.data,l,c),o.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var _r={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,s,n){return r.forEach(a=>{this.processors[a]&&(e=this.processors[a].process(e,t,s,n))}),e}};const Kt={};class We extends Ke{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),$o(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=X.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const s=this.resolve(e,t);return s&&s.res!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const o=s&&e.indexOf(s)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Ho(e,s,n);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:j(a)?[a]:a};const u=e.split(s);(s!==n||s===n&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(n)}return{key:e,namespaces:j(a)?[a]:a}}translate(e,t,s){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],t),c=l[l.length-1],u=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(d){const w=t.nsSeparator||this.options.nsSeparator;return n?{res:`${c}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${w}${o}`}return n?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:o}const f=this.resolve(e,t);let h=f&&f.res;const g=f&&f.usedKey||o,p=f&&f.exactUsedKey||o,y=Object.prototype.toString.apply(h),x=["[object Number]","[object Function]","[object RegExp]"],b=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,R=!j(h)&&typeof h!="boolean"&&typeof h!="number";if(v&&h&&R&&x.indexOf(y)<0&&!(j(b)&&Array.isArray(h))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,h,{...t,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return n?(f.res=w,f.usedParams=this.getUsedParamsDetails(t),f):w}if(a){const w=Array.isArray(h),C=w?[]:{},P=w?p:g;for(const L in h)if(Object.prototype.hasOwnProperty.call(h,L)){const K=`${P}${a}${L}`;C[L]=this.translate(K,{...t,joinArrays:!1,ns:l}),C[L]===K&&(C[L]=h[L])}h=C}}else if(v&&j(b)&&Array.isArray(h))h=h.join(b),h&&(h=this.extendTranslation(h,e,t,s));else{let w=!1,C=!1;const P=t.count!==void 0&&!j(t.count),L=We.hasDefaultValue(t),K=P?this.pluralResolver.getSuffix(u,t.count,t):"",M=t.ordinal&&P?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",E=P&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),V=E&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${K}`]||t[`defaultValue${M}`]||t.defaultValue;!this.isValidLookup(h)&&L&&(w=!0,h=V),this.isValidLookup(h)||(C=!0,h=o);const U=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:h,k=L&&V!==h&&this.options.updateMissing;if(C||w||k){if(this.logger.log(k?"updateKey":"missingKey",u,c,o,k?V:h),a){const T=this.resolve(o,{...t,keySeparator:!1});T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let D=[];const F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&F&&F[0])for(let T=0;T<F.length;T++)D.push(F[T]);else this.options.saveMissingTo==="all"?D=this.languageUtils.toResolveHierarchy(t.lng||this.language):D.push(t.lng||this.language);const ne=(T,z,Y)=>{const Le=L&&Y!==h?Y:U;this.options.missingKeyHandler?this.options.missingKeyHandler(T,c,z,Le,k,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(T,c,z,Le,k,t),this.emit("missingKey",T,c,z,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?D.forEach(T=>{const z=this.pluralResolver.getSuffixes(T,t);E&&t[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(Y=>{ne([T],o+Y,t[`defaultValue${Y}`]||V)})}):ne(D,o,V))}h=this.extendTranslation(h,e,t,f,s),C&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${c}:${o}`),(C||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,w?h:void 0):h=this.options.parseMissingKeyHandler(h))}return n?(f.res=h,f.usedParams=this.getUsedParamsDetails(t),f):h}extendTranslation(e,t,s,n,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const u=j(e)&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const h=e.match(this.interpolator.nestingRegexp);d=h&&h.length}let f=s.replace&&!j(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,s.lng||this.language||n.usedLng,s),u){const h=e.match(this.interpolator.nestingRegexp),g=h&&h.length;d<g&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&n&&n.res&&(s.lng=this.language||n.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,g=new Array(h),p=0;p<h;p++)g[p]=arguments[p];return a&&a[0]===g[0]&&!s.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):o.translate(...g,t)},s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,c=j(l)?[l]:l;return e!=null&&c&&c.length&&s.applyPostProcessor!==!1&&(e=_r.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,n,a,o,l;return j(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(s))return;const u=this.extractFromKey(c,t),d=u.key;n=d;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=t.count!==void 0&&!j(t.count),g=h&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),p=t.context!==void 0&&(j(t.context)||typeof t.context=="number")&&t.context!=="",y=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(x=>{this.isValidLookup(s)||(l=x,!Kt[`${y[0]}-${x}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(Kt[`${y[0]}-${x}`]=!0,this.logger.warn(`key "${n}" for languages "${y.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(s))return;o=b;const v=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,d,b,x,t);else{let w;h&&(w=this.pluralResolver.getSuffix(b,t.count,t));const C=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(v.push(d+w),t.ordinal&&w.indexOf(P)===0&&v.push(d+w.replace(P,this.options.pluralSeparator)),g&&v.push(d+C)),p){const L=`${d}${this.options.contextSeparator}${t.context}`;v.push(L),h&&(v.push(L+w),t.ordinal&&w.indexOf(P)===0&&v.push(L+w.replace(P,this.options.pluralSeparator)),g&&v.push(L+C))}}let R;for(;R=v.pop();)this.isValidLookup(s)||(a=R,s=this.getResource(b,x,R,t))}))})}),{res:s,usedKey:n,exactUsedKey:a,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,s,n):this.resourceStore.getResource(e,t,s,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!j(e.replace);let n=s?e.replace:e;if(s&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(const a of t)delete n[a]}return n}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}const rt=r=>r.charAt(0).toUpperCase()+r.slice(1);class Qt{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=X.create("languageUtils")}getScriptPartFromCode(e){if(e=Ae(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Ae(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(j(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let n=Intl.getCanonicalLocales(e)[0];if(n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n)return n}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let s=e.split("-");return this.options.lowerCaseLng?s=s.map(n=>n.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=rt(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=rt(s[1].toLowerCase())),t.indexOf(s[2].toLowerCase())>-1&&(s[2]=rt(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const n=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const n=this.getLanguagePartFromCode(s);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(a=>{if(a===n)return a;if(!(a.indexOf("-")<0&&n.indexOf("-")<0)&&(a.indexOf("-")>0&&n.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===n||a.indexOf(n)===0&&n.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),j(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],a=o=>{o&&(this.isSupportedCode(o)?n.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return j(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):j(e)&&a(this.formatLanguageCode(e)),s.forEach(o=>{n.indexOf(o)<0&&a(this.formatLanguageCode(o))}),n}}let Jo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ko={1:r=>+(r>1),2:r=>+(r!=1),3:r=>0,4:r=>r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,5:r=>r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5,6:r=>r==1?0:r>=2&&r<=4?1:2,7:r=>r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,8:r=>r==1?0:r==2?1:r!=8&&r!=11?2:3,9:r=>+(r>=2),10:r=>r==1?0:r==2?1:r<7?2:r<11?3:4,11:r=>r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3,12:r=>+(r%10!=1||r%100==11),13:r=>+(r!==0),14:r=>r==1?0:r==2?1:r==3?2:3,15:r=>r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2,16:r=>r%10==1&&r%100!=11?0:r!==0?1:2,17:r=>r==1||r%10==1&&r%100!=11?0:1,18:r=>r==0?0:r==1?1:2,19:r=>r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3,20:r=>r==1?0:r==0||r%100>0&&r%100<20?1:2,21:r=>r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0,22:r=>r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3};const Qo=["v1","v2","v3"],Xo=["v4"],Xt={zero:0,one:1,two:2,few:3,many:4,other:5},Go=()=>{const r={};return Jo.forEach(e=>{e.lngs.forEach(t=>{r[t]={numbers:e.nr,plurals:Ko[e.fc]}})}),r};class Zo{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=X.create("pluralResolver"),(!this.options.compatibilityJSON||Xo.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Go(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const s=Ae(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:s,type:n});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(s,{type:n})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[a]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,s).map(n=>`${t}${n}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((n,a)=>Xt[n]-Xt[a]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):s.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,s);return n?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:this.getSuffixRetroCompatible(n,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const s=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let n=e.numbers[s];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));const a=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?`_plural_${n.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!Qo.includes(this.options.compatibilityJSON)}}const Gt=function(r,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=Ao(r,e,t);return!a&&n&&j(t)&&(a=ut(r,t,s),a===void 0&&(a=ut(e,t,s))),a},st=r=>r.replace(/\$/g,"$$$$");class ei{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=X.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:n,prefix:a,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:h,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:y,nestingOptionsSeparator:x,maxReplaces:b,alwaysFormat:v}=e.interpolation;this.escape=t!==void 0?t:Wo,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=a?he(a):o||"{{",this.suffix=l?he(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=h?he(h):g||he("$t("),this.nestingSuffix=p?he(p):y||he(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=b||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t&&t.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,s,n){let a,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const b=Gt(t,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,s,{...n,...t,interpolationkey:g}):b}const p=g.split(this.formatSeparator),y=p.shift().trim(),x=p.join(this.formatSeparator).trim();return this.format(Gt(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),x,s,{...n,...t,interpolationkey:y})};this.resetRegExp();const d=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,f=n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>st(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?st(this.escape(g)):st(g)}].forEach(g=>{for(l=0;a=g.regex.exec(e);){const p=a[1].trim();if(o=u(p),o===void 0)if(typeof d=="function"){const x=d(e,a,n);o=j(x)?x:""}else if(n&&Object.prototype.hasOwnProperty.call(n,p))o="";else if(f){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),o="";else!j(o)&&!this.useRawValueToEscape&&(o=Bt(o));const y=g.safeValue(o);if(e=e.replace(a[0],y),f?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=a[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,a,o;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const f=c.split(new RegExp(`${d}[ ]*{`));let h=`{${f[1]}`;c=f[0],h=this.interpolate(h,o);const g=h.match(/'/g),p=h.match(/"/g);(g&&g.length%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${d}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;n=this.nestingRegexp.exec(e);){let c=[];o={...s},o=o.replace&&!j(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const d=n[1].split(this.formatSeparator).map(f=>f.trim());n[1]=d.shift(),c=d,u=!0}if(a=t(l.call(this,n[1].trim(),o),o),a&&n[0]===e&&!j(a))return a;j(a)||(a=Bt(a)),a||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),a=""),u&&(a=c.reduce((d,f)=>this.format(d,f,s.lng,{...s,interpolationkey:n[1].trim()}),a.trim())),e=e.replace(n[0],a),this.regexp.lastIndex=0}return e}}const ti=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const s=r.split("(");e=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();t[d]||(t[d]=u),u==="false"&&(t[d]=!1),u==="true"&&(t[d]=!0),isNaN(u)||(t[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},fe=r=>{const e={};return(t,s,n)=>{let a=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(a={...a,[n.interpolationkey]:void 0});const o=s+JSON.stringify(a);let l=e[o];return l||(l=r(Ae(s),n),e[o]=l),l(t)}};class ri{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=X.create("formatter"),this.options=e,this.formats={number:fe((t,s)=>{const n=new Intl.NumberFormat(t,{...s});return a=>n.format(a)}),currency:fe((t,s)=>{const n=new Intl.NumberFormat(t,{...s,style:"currency"});return a=>n.format(a)}),datetime:fe((t,s)=>{const n=new Intl.DateTimeFormat(t,{...s});return a=>n.format(a)}),relativetime:fe((t,s)=>{const n=new Intl.RelativeTimeFormat(t,{...s});return a=>n.format(a,s.range||"day")}),list:fe((t,s)=>{const n=new Intl.ListFormat(t,{...s});return a=>n.format(a)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=fe(t)}format(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,c)=>{const{formatName:u,formatOptions:d}=ti(c);if(this.formats[u]){let f=l;try{const h=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},g=h.locale||h.lng||n.locale||n.lng||s;f=this.formats[u](l,g,{...d,...n,...h})}catch(h){this.logger.warn(h)}return f}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const si=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class ni extends Ke{constructor(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=n,this.logger=X.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,n.backend,n)}queueLoad(e,t,s,n){const a={},o={},l={},c={};return e.forEach(u=>{let d=!0;t.forEach(f=>{const h=`${u}|${f}`;!s.reload&&this.store.hasResourceBundle(u,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,d=!1,o[h]===void 0&&(o[h]=!0),a[h]===void 0&&(a[h]=!0),c[f]===void 0&&(c[f]=!0)))}),d||(l[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,s){const n=e.split("|"),a=n[0],o=n[1];t&&this.emit("failedLoading",a,o,t),!t&&s&&this.store.addResourceBundle(a,o,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const l={};this.queue.forEach(c=>{_o(c.loaded,[a],o),si(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(f=>{l[u][f]===void 0&&(l[u][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:n,wait:a,callback:o});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&d&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,n+1,a*2,o)},a);return}o(u,d)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,t,l)}prepareLoading(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();j(e)&&(e=this.languageUtils.toResolveHierarchy(e)),j(t)&&(t=[t]);const a=this.queueLoad(e,t,s,n);if(!a.toLoad.length)return a.pending.length||n(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e.split("|"),n=s[0],a=s[1];this.read(n,a,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${t}loading namespace ${a} for language ${n} failed`,o),!o&&l&&this.logger.log(`${t}loaded namespace ${a} for language ${n}`,l),this.loaded(e,o,l)})}saveMissing(e,t,s,n,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,t,s,n,c):d=u(e,t,s,n),d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}else u(e,t,s,n,l,c)}!e||!e[0]||this.store.addResource(e[0],t,s,n)}}}const Zt=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),j(r[1])&&(e.defaultValue=r[1]),j(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),er=r=>(j(r.ns)&&(r.ns=[r.ns]),j(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),j(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r),Te=()=>{},ai=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class ke extends Ke{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=er(e),this.services={},this.logger=X,this.modules={external:[]},ai(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(j(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Zt();this.options={...n,...this.options,...er(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?X.init(a(this.modules.logger),this.options):X.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=ri);const f=new Qt(this.options);this.store=new Jt(this.options.resources,this.options);const h=this.services;h.logger=X,h.resourceStore=this.store,h.languageUtils=f,h.pluralResolver=new Zo(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=a(d),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new ei(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new ni(a(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(g){for(var p=arguments.length,y=new Array(p>1?p-1:0),x=1;x<p;x++)y[x-1]=arguments[x];e.emit(g,...y)}),this.modules.languageDetector&&(h.languageDetector=a(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=a(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new We(this.services,this.options),this.translator.on("*",function(g){for(var p=arguments.length,y=new Array(p>1?p-1:0),x=1;x<p;x++)y[x-1]=arguments[x];e.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,s||(s=Te),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=ye(),u=()=>{const d=(f,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(h),s(f,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te;const n=j(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const a=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};n?o(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(l)})}else s(null)}reloadResources(e,t,s){const n=ye();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Te),this.services.backendConnector.reload(e,t,a=>{n.resolve(),s(a)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&_r.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(e,t){var s=this;this.isLanguageChangingTo=e;const n=ye();this.emit("languageChanging",e);const a=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,u)=>{u?(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,n.resolve(function(){return s.t(...arguments)}),t&&t(c,function(){return s.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=j(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||a(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,d=>{o(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),n}getFixedT(e,t,s){var n=this;const a=function(o,l){let c;if(typeof l!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),f=2;f<u;f++)d[f-2]=arguments[f];c=n.options.overloadTranslationOptionHandler([o,l].concat(d))}else c={...l};c.lng=c.lng||a.lng,c.lngs=c.lngs||a.lngs,c.ns=c.ns||a.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||a.keyPrefix);const h=n.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(p=>`${c.keyPrefix}${h}${p}`):g=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o,n.t(g,c)};return j(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=s,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const l=t.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,e)&&(!n||o(a,e)))}loadNamespaces(e,t){const s=ye();return this.options.ns?(j(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{s.resolve(),t&&t(n)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=ye();j(e)&&(e=[e]);const n=this.options.preload||[],a=e.filter(o=>n.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=n.concat(a),this.loadResources(o=>{s.resolve(),t&&t(o)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new Qt(Zt());return t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new ke(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te;const s=e.forkResourceStore;s&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},a=new ke(n);return(e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},s&&(a.store=new Jt(this.store.data,n),a.services.resourceStore=a.store),a.translator=new We(a.services,n),a.translator.on("*",function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];a.emit(l,...u)}),a.init(n,t),a.translator.options=n,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const B=ke.createInstance();B.createInstance=ke.createInstance;B.createInstance;B.dir;B.init;B.loadResources;B.reloadResources;B.use;B.changeLanguage;B.getFixedT;B.t;B.exists;B.setDefaultNamespace;B.hasLoadedNamespace;B.loadNamespaces;B.loadLanguages;function oi(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ce(r){"@babel/helpers - typeof";return Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(r)}function ii(r,e){if(Ce(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(Ce(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function li(r){var e=ii(r,"string");return Ce(e)=="symbol"?e:e+""}function ci(r,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,li(s.key),s)}}function ui(r,e,t){return e&&ci(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}var Ar=[],di=Ar.forEach,hi=Ar.slice;function fi(r){return di.call(hi.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}var tr=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,gi=function(e,t,s){var n=s||{};n.path=n.path||"/";var a=encodeURIComponent(t),o="".concat(e,"=").concat(a);if(n.maxAge>0){var l=n.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(l))}if(n.domain){if(!tr.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(n.domain)}if(n.path){if(!tr.test(n.path))throw new TypeError("option path is invalid");o+="; Path=".concat(n.path)}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.sameSite){var c=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},rr={create:function(e,t,s,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};s&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+s*60*1e3)),n&&(a.domain=n),document.cookie=gi(e,encodeURIComponent(t),a)},read:function(e){for(var t="".concat(e,"="),s=document.cookie.split(";"),n=0;n<s.length;n++){for(var a=s[n];a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null},remove:function(e){this.create(e,"",-1)}},mi={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var s=rr.read(e.lookupCookie);s&&(t=s)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&rr.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},pi={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var s=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));for(var n=s.substring(1),a=n.split("&"),o=0;o<a.length;o++){var l=a[o].indexOf("=");if(l>0){var c=a[o].substring(0,l);c===e.lookupQuerystring&&(t=a[o].substring(l+1))}}}return t}},be=null,sr=function(){if(be!==null)return be;try{be=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{be=!1}return be},xi={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&sr()){var s=window.localStorage.getItem(e.lookupLocalStorage);s&&(t=s)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&sr()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},we=null,nr=function(){if(we!==null)return we;try{we=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{we=!1}return we},yi={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&nr()){var s=window.sessionStorage.getItem(e.lookupSessionStorage);s&&(t=s)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&nr()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},bi={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var s=0;s<navigator.languages.length;s++)t.push(navigator.languages[s]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},wi={name:"htmlTag",lookup:function(e){var t,s=e.htmlTag||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(t=s.getAttribute("lang")),t}},vi={name:"path",lookup:function(e){var t;if(typeof window<"u"){var s=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(s instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof s[e.lookupFromPathIndex]!="string")return;t=s[e.lookupFromPathIndex].replace("/","")}else t=s[0].replace("/","")}return t}},Si={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,s=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[t]}},qr=!1;try{document.cookie,qr=!0}catch{}var Wr=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];qr||Wr.splice(1,1);function Ni(){return{order:Wr,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var Vr=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oi(this,r),this.type="languageDetector",this.detectors={},this.init(e,t)}return ui(r,[{key:"init",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=fi(s,this.options||{},Ni()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(a){return a.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(mi),this.addDetector(pi),this.addDetector(xi),this.addDetector(yi),this.addDetector(bi),this.addDetector(wi),this.addDetector(vi),this.addDetector(Si)}},{key:"addDetector",value:function(t){return this.detectors[t.name]=t,this}},{key:"detect",value:function(t){var s=this;t||(t=this.options.order);var n=[];return t.forEach(function(a){if(s.detectors[a]){var o=s.detectors[a].lookup(s.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.map(function(a){return s.options.convertDetectedLanguage(a)}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(t,s){var n=this;s||(s=this.options.caches),s&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||s.forEach(function(a){n.detectors[a]&&n.detectors[a].cacheUserLanguage(t,n.options)}))}}])}();Vr.type="languageDetector";const ji={translation:{common:{chat:"Chat",calendar:"Calendar",team:"Team",search:"Search members...",language:"Language",profile:"Profile",signOut:"Sign Out",members:"members",exchange:"Shift Exchange",social:"Social Links",compare:"Compare",selectUser:"Select User"},chatRooms:{general:"General",nurses:"Nurses",doctors:"Doctors",assistants:"Assistants"},roles:{nurse:"Nurse",doctor:"Doctor",assistant:"Assistant",headNurse:"Head Nurse"},shifts:{day:"Day Shift",night:"Night Shift",off:"Day Off",dayShort:"Day",nightShort:"Night",offShort:"Off"},calendar:{weekDays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],legend:{dayShift:"Day Shift",nightShift:"Night Shift",dayOff:"Day Off"}},modal:{availableColleagues:"Available for Exchange",shiftColleagues:"On Same Shift",noColleagues:"No colleagues available for shift exchange",noShiftColleagues:"No colleagues on this shift"},chat:{typeMessage:"Type a message...",you:"You"},auth:{resetPassword:"Reset Password",setNewPassword:"Set New Password",newPassword:"New Password",enterNewPassword:"Enter your new password",sendResetLink:"Send Reset Link",updatePassword:"Update Password",resetEmailSent:"Password reset link has been sent to your email",passwordResetSuccess:"Password has been successfully updated",resetError:"Failed to process password reset",forgotPassword:"Forgot your password?",backToLogin:"Back to Login",changePassword:"Change Password",currentPassword:"Current Password",confirmPassword:"Confirm Password",passwordsDoNotMatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters",passwordChangeSuccess:"Password successfully changed",passwordChangeError:"Failed to change password",processing:"Processing..."}}},ki={translation:{common:{chat:"Чат",calendar:"Календарь",team:"Команда",search:"Поиск участников...",language:"Язык",profile:"Профиль",signOut:"Выйти",members:"участников",exchange:"Обмен сменами",social:"Соц. сети",compare:"Сравнить",selectUser:"Выберите пользователя"},chatRooms:{general:"Общий",nurses:"Медсестры",doctors:"Врачи",assistants:"Санитары"},roles:{nurse:"Мед.сестра",doctor:"Доктор",assistant:"Санитар",headNurse:"Старшая мед.сестра"},shifts:{day:"Дневная смена",night:"Ночная смена",off:"Выходной",dayShort:"День",nightShort:"Ночь",offShort:"Вых"},calendar:{weekDays:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],legend:{dayShift:"Дневная смена",nightShift:"Ночная смена",dayOff:"Выходной"}},modal:{availableColleagues:"Доступны для обмена",shiftColleagues:"На этой смене",noColleagues:"Нет доступных коллег для обмена сменами",noShiftColleagues:"Нет коллег на этой смене"},chat:{typeMessage:"Введите сообщение...",you:"Вы"},groups:{doctors:"Доктора",nurses:"Медсестры",headNurses:"Старшие медсестры",assistants:"Санитары"},auth:{resetPassword:"Сброс пароля",setNewPassword:"Установить новый пароль",newPassword:"Новый пароль",enterNewPassword:"Введите новый пароль",sendResetLink:"Отправить ссылку для сброса",updatePassword:"Обновить пароль",resetEmailSent:"Ссылка для сброса пароля отправлена на вашу почту",passwordResetSuccess:"Пароль успешно обновлен",resetError:"Не удалось обработать сброс пароля",forgotPassword:"Забыли пароль?",backToLogin:"Вернуться к входу",changePassword:"Изменить пароль",currentPassword:"Текущий пароль",confirmPassword:"Подтвердите пароль",passwordsDoNotMatch:"Пароли не совпадают",passwordTooShort:"Пароль должен содержать минимум 6 символов",passwordChangeSuccess:"Пароль успешно изменен",passwordChangeError:"Не удалось изменить пароль",processing:"Обработка..."}}},Ci={translation:{common:{chat:"Chat",calendar:"Kalendář",team:"Tým",search:"Hledat členy...",language:"Jazyk",profile:"Profil",signOut:"Odhlásit se",members:"členů",exchange:"Výměna směn",social:"Sociální sítě"},chatRooms:{general:"Obecný",nurses:"Zdravotní sestry",doctors:"Lékaři",assistants:"Asistenti"},roles:{nurse:"Zdravotní sestra",doctor:"Lékař",assistant:"Asistent",headNurse:"Hlavní sestra"},shifts:{day:"Denní směna",night:"Noční směna",off:"Volno",dayShort:"Den",nightShort:"Noc",offShort:"Vol"},calendar:{weekDays:["Po","Út","St","Čt","Pá","So","Ne"],legend:{dayShift:"Denní směna",nightShift:"Noční směna",dayOff:"Volno"}},modal:{availableColleagues:"Dostupní pro výměnu",shiftColleagues:"Na stejné směně",noColleagues:"Žádní kolegové pro výměnu směn nejsou k dispozici",noShiftColleagues:"Žádní kolegové na této směně"},chat:{typeMessage:"Napište zprávu...",you:"Vy"},groups:{doctors:"Lékaři",nurses:"Zdravotní sestry",headNurses:"Hlavní sestry",assistants:"Asistenti"},auth:{resetPassword:"Obnovit heslo",setNewPassword:"Nastavit nové heslo",newPassword:"Nové heslo",enterNewPassword:"Zadejte nové heslo",sendResetLink:"Odeslat odkaz pro obnovení",updatePassword:"Aktualizovat heslo",resetEmailSent:"Odkaz pro obnovení hesla byl odeslán na váš email",passwordResetSuccess:"Heslo bylo úspěšně aktualizováno",resetError:"Nepodařilo se zpracovat obnovení hesla",forgotPassword:"Zapomněli jste heslo?",backToLogin:"Zpět na přihlášení",signIn:"Přihlásit se",signUp:"Registrovat se",email:"Email",password:"Heslo",fullName:"Celé jméno",enterEmail:"Zadejte email",enterPassword:"Zadejte heslo",enterName:"Zadejte celé jméno",minPasswordLength:"Heslo musí mít alespoň 6 znaků",processing:"Zpracování...",changePassword:"Změnit heslo",currentPassword:"Současné heslo",confirmPassword:"Potvrďte heslo",passwordsDoNotMatch:"Hesla se neshodují",passwordTooShort:"Heslo musí obsahovat alespoň 6 znaků",passwordChangeSuccess:"Heslo bylo úspěšně změněno",passwordChangeError:"Nepodařilo se změnit heslo"},errors:{invalidCredentials:"Nesprávný email nebo heslo",emailNotConfirmed:"Prosím potvrďte svůj email",userExists:"Tento email je již registrován",invalidEmail:"Prosím zadejte platný email",weakPassword:"Heslo musí obsahovat alespoň 6 znaků",required:"Prosím vyplňte všechna povinná pole"},profile:{role:"Role",shift:"Směna",phone:"Telefon",noPhone:"Žádné telefonní číslo",socialLinks:"Sociální sítě",editProfile:"Upravit profil",saveChanges:"Uložit změny",uploadPhoto:"Nahrát fotografii",maxFileSize:"Maximální velikost souboru: 5MB"}}},Ei={translation:{common:{chat:"Чат",calendar:"Календар",team:"Команда",search:"Пошук учасників...",language:"Мова",profile:"Профіль",signOut:"Вийти",members:"учасників",exchange:"Обмін змінами",social:"Соц. мережі"},chatRooms:{general:"Загальний",nurses:"Медсестри",doctors:"Лікарі",assistants:"Санітари"},roles:{nurse:"Мед.сестра",doctor:"Лікар",assistant:"Санітар",headNurse:"Старша мед.сестра"},shifts:{day:"Денна зміна",night:"Нічна зміна",off:"Вихідний",dayShort:"День",nightShort:"Ніч",offShort:"Вих"},calendar:{weekDays:["Пн","Вт","Ср","Чт","Пт","Сб","Нд"],legend:{dayShift:"Денна зміна",nightShift:"Нічна зміна",dayOff:"Вихідний"}},modal:{availableColleagues:"Доступні для обміну",shiftColleagues:"На цій зміні",noColleagues:"Немає доступних колег для обміну змінами",noShiftColleagues:"Немає колег на цій зміні"},chat:{typeMessage:"Введіть повідомлення...",you:"Ви"},groups:{doctors:"Лікарі",nurses:"Медсестри",headNurses:"Старші медсестри",assistants:"Санітари"},auth:{resetPassword:"Скидання пароля",setNewPassword:"Встановити новий пароль",newPassword:"Новий пароль",enterNewPassword:"Введіть новий пароль",sendResetLink:"Надіслати посилання для скидання",updatePassword:"Оновити пароль",resetEmailSent:"Посилання для скидання пароля надіслано на вашу пошту",passwordResetSuccess:"Пароль успішно оновлено",resetError:"Не вдалося обробити скидання пароля",forgotPassword:"Забули пароль?",backToLogin:"Повернутися до входу",changePassword:"Змінити пароль",currentPassword:"Поточний пароль",confirmPassword:"Підтвердіть пароль",passwordsDoNotMatch:"Паролі не співпадають",passwordTooShort:"Пароль повинен містити мінімум 6 символів",passwordChangeSuccess:"Пароль успішно змінено",passwordChangeError:"Не вдалося змінити пароль",processing:"Обробка..."}}};B.use(Vr).use(Kn).init({resources:{en:ji,ru:ki,cs:Ci,uk:Ei},fallbackLng:"en",interpolation:{escapeValue:!1}});const Br=document.getElementById("root");if(!Br)throw new Error("Failed to find the root element");lr(Br).render(i.jsx(m.StrictMode,{children:i.jsx(Fo,{})}));
//# sourceMappingURL=index-t5WQvW-B.js.map
